{% extends "_base.html" %}
{% load static %}
{% load timeline_helper %}
{% block meta %}
    <meta property="og:title" content="Create a super secret invite" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://doublel.studio/accounts/invite_user" />
{% endblock meta %}

{% block links %}
 <link rel="stylesheet" href="{% static "css/tailwind-output.css" %}">
{% endblock %}
{% block style %}
    h1, h2, a {
        font-family: 'Rubik', sans-serif;
    }

    p {
        font-family: 'Karla', sans-serif;
    }
    
{% endblock %}
{% block font %}
<link defer href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Karla&family=Rubik:wght@500;700&display=swap" rel="stylesheet">
<script defer src="https://kit.fontawesome.com/273c56c702.js" crossorigin="anonymous"></script>
{% endblock %}
{% block title %}Accept Invite{% endblock title %}
{% block content %}
{% if errors %}
<script>alert("{{errors}}")</script>
{% endif %}
<div class="w-11/12 lg:w-3/6 h-screen flex flex-col mx-auto mt-5 justify-center items-center">
    <div id="form-container" class="w-fit rounded-lg h-fit p-10 flex flex-col items-start border-seth-blue-600 border-2">
        <div class="flex flex-row space-x-1 mb-5 text-slate-900 text-black">
            <h4>ðŸ¤« Shhhhhhh....What's the secret password?</h4>
        </div>
        
        <form action={% url 'accept_invitation' %} method="post" class="w-full">
            {% csrf_token %}
            <div class="flex flex-col justify-center">
                <label class="block">
                    <span id="email-label" class="block text-sm font-medium text-slate-700" aria-label-for="email">Email: </span>
                    <div class="mt-1">
                        <input type="email" name="email" id="email" class="peer px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400  disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none" placeholder="you@example.com">
                        {% if "Invalid Email:" in errors %}
                        <p class="mt-2 invisible peer-invalid:visible text-pink-600 text-sm">{{errors.email}}</p>
                        {% endif %}
                    </div>
                </label>
                <label class="block">
                    <span id="name-label" class="block text-sm font-medium text-slate-700" aria-label-for="name">Name: </span>
                    <div class="mt-1">
                        <input type="text" name="name" id="name" class="peer px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400  disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none" placeholder="Steve Wozniak">
                    </div>
                </label>
                <label class="block">
                    <span id="password1-label" class="block text-sm font-medium text-slate-700" aria-label-for="password1">Password: </span>
                    <div class="mt-1">
                        <input type="password" name="password1" id="password1" class="peer px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400  disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none">
                    </div>
                </label>
                <label class="block">
                    <span id="password2-label" class="block text-sm font-medium text-slate-700" aria-label-for="password1">Confirm Password: </span>
                    <div class="mt-1">
                        <input type="password" name="password2" id="password2" class="peer px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400  disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none"> 
                        <p class="mt-2 invisible peer-invalid:visible text-pink-600 text-sm">Passwords do not match :(</p>
                    </div>
                </label>
                <label class="block">
                    <span id="invite-code-label" class="block text-sm font-medium text-slate-700" aria-label-for="invite_code">Invitation Code: </span>
                    <div class="mt-1">
                        <input type="text" name="invite_code" id="invite_code" class="peer px-3 py-2 bg-white border shadow-sm border-slate-300 placeholder-slate-400  disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 focus:outline-none focus:border-sky-500 focus:ring-sky-500 block w-full rounded-md sm:text-sm focus:ring-1 invalid:border-pink-500 invalid:text-pink-600 focus:invalid:border-pink-500 focus:invalid:ring-pink-500 disabled:shadow-none" placeholder="00000000-0000-0000-0000-000000000000">
                        {% if "Invalid Invite Code:" in errors %}
                        <p class="mt-2 invisible peer-invalid:visible text-pink-600 text-sm">{{errors.code}}</p>
                        {% endif %}
                    </div>
                </label>
                <input class="mt-8 w-min bg-slate-500 hover:bg-slate-600 focus:outline-none focus:ring focus:ring-pink-300 active:bg-slate-700 px-5 py-2 text-sm leading-5 rounded-full font-semibold text-slate-50" type="submit" value="Signup">
            </div>
        </form>
    </div>
</div>
<script>
    
    document.getElementById("password2").addEventListener("keyup", function(event) {
        var password1_input_value = document.getElementById("password1").value;
        var password2_input_value = event.target.value;

        console.log("HI!");

        if (password1_input_value !== password2_input_value) {
            document.getElementById("password2").setCustomValidity("Invalid Value.");
        } else {
            document.getElementById("password2").setCustomValidity("");
        }
    });


</script>

{% endblock content %}